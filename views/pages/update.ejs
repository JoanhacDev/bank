<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Actualizar</title>
    <link rel="stylesheet" href="/styles/update_style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:ital,wght@0,200..1000;1,200..1000&display=swap"
        rel="stylesheet">
</head>

<body>
    <%- include('../partials/nav.ejs') %>
        <main>
            <div class="container">
                <% if (error == true) { %>
                    <div class="error-message-container">
                        <p class="error-message">No se encuentra el usuario con esa cédula de ciudadanía</p>
                    </div>
                <% } %>
                <h3>ACTUALIZAR DATOS DE USUARIO</h3>
                <form class="form-buscar" method="post" action="/menu/update/validating">
                    <label for="cedulaBuscar">Ingresa el número de cédula de ciudadanía (C.C.)</label>
                    <div class="form-buscar-input">
                        <input type="number" id="cedulaBuscar" placeholder="Ingrese cédula de ciudadanía" name="cc" required autocomplete="off">
                        <div class="content-btn-buscar">
                            <button type="submit" id="buscar" class="btn-btn-buscar">Buscar</button>
                        </div>
                    </div>
                </form>
                
                <% if(valid==true){ %>

                    <form id="information-user" method="post" action="/menu/update/updating">
                        <h3 class="section-label">Datos personales</h3>
                        <div class="form-group">
                            <label for="cc">Cédula de Ciudadanía</label>
                            <input type="number" id="cc" placeholder="Ingrese cédula de ciudadanía"
                                value="<%=datos.CC%>" disabled>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="name">Primer nombre</label>
                                <input type="text" id="name" name="name" placeholder="Ingrese el primer nombre"
                                    value="<%=datos.first_name%>" required autocomplete="off">
                            </div>
                            <div class="form-group">
                                <label for="lastName">Primer apellido</label>
                                <input type="text" id="lastName" name="lastName" placeholder="Ingrese el primer apellido"
                                    value="<%=datos.last_name%>" required autocomplete="off">
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="birthdate">Fecha de Cumpleaños</label>
                                <input type="date" id="birthdate" name="birthdate" value="<%=datos.birth%>" required>
                            </div>
                            <div class="form-group select-container">
                                <label for="gender">Género</label>
                                <div class="select-custom">
                                    <select id="gender" name="gender" required>
                                        <option value="MASCULINO" <%= datos.gender == 'MASCULINO' ? 'selected' : '' %>>Masculino</option>
                                        <option value="FEMENINO" <%= datos.gender == 'FEMENINO' ? 'selected' : '' %>>Femenino</option>
                                        <option value="OTRO" <%= datos.gender == 'OTRO' ? 'selected' : '' %>>Otro</option>
                                    </select>
                                    <i class="ph ph-caret-circle-down"></i>
                                </div>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="address">Dirección</label>
                                <input type="text" id="address" name="address" placeholder="Ingrese la dirección" value="<%=datos.address%>" required autocomplete="off">
                            </div>
                            <div class="form-group">
                                <label for="phone">Teléfono</label>
                                <input type="text" id="phone" name="phone" maxlength="14" placeholder="Ingrese el teléfono" value="<%=datos.phone%>" required autocomplete="off">
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="email">Correo Electrónico</label>
                                <input type="text" id="email" name="email" placeholder="Ingrese el correo electrónico" value="<%=datos.email%>" required autocomplete="off">
                            </div>
                            <div class="form-group select-container">
                                <label for="maritalStatus">Estado civil</label>
                                <div class="select-custom">
                                    <select id="maritalStatus" name="maritalStatus" required>
                                        <option value="SOLTERO" <%= datos.marital_status == 'SOLTERO' ? 'selected' : '' %>>Soltero</option>
                                        <option value="CASADO" <%= datos.marital_status == 'CASADO' ? 'selected' : '' %>>Casado</option>
                                        <option value="DIVORCIADO" <%= datos.marital_status == 'DIVORCIADO' ? 'selected' : '' %>>Divorciado</option>
                                        <option value="VIUDO" <%= datos.marital_status == 'VIUDO' ? 'selected' : '' %>>Viudo</option>
                                    </select>
                                    <i class="ph ph-caret-circle-down"></i>
                                </div>
                            </div>
                        </div>

                        <h3>Datos de la cuenta</h3>
                        <div class="form-row">
                            <div class="form-group select-container">
                                <label for="accountType">Tipo de cuenta</label>
                                <div class="select-custom">
                                    <select id="accountType" disabled>
                                        <option value="AHORROS">Ahorros</option>
                                        <option value="CORRIENTE">Corriente</option>
                                    </select>
                                    <i class="ph ph-caret-circle-down"></i>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="accountNumber">Número de cuenta</label>
                                <input type="number" id="accountNumber" placeholder="Ingrese el número de cuenta" value="<%=datos.account_number%>" disabled>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="password-container">
                                <label for="password">Contraseña</label>
                                <div class="password-custom">
                                    <input type="password" id="password" name="pass" placeholder="Ingrese la contraseña" value="<%=datos.account_password %>" required>
                                    <i class="ph ph-eye-closed"></i>
                                    <i class="ph ph-eye"></i>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="balance">Saldo</label>
                                <input type="number" id="balance" placeholder="Ingrese el saldo" value="<%=datos.balance %>" disabled>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="openingDate">Fecha de apertura de cuenta</label>
                            <input type="date" id="openingDate" value="<%=datos.account_open%>" disabled>
                        </div>
                        <button type="submit" class="btn-actualizar">Actualizar</button>
                    </form>

                    <% } %>
            </div>
        </main>
        <%- include('../partials/footer.ejs') %>
            <script src="https://unpkg.com/@phosphor-icons/web"></script>
            <script src="/js/password.js"></script>
</body>

</html>